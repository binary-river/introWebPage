<!DOCTYPE html>
<html>
    <head>
        <title>Intro</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./css/style.css"/> 
        <script src="./js/clock.js"></script>
        <script src="./js/bg.js"></script>
        <script src="./js/todos.js"></script>
        <script src="./js/login.js"></script>
        <script src="./js/weather.js"></script>
        <script>

            document.addEventListener("DOMContentLoaded", () => {

                //clock
                const c = document.getElementById("clock");
                move(c);
                setInterval(move.bind(this,c), 1000);
                changeBackgroundImage(document.body);

                //todoList
                const todoList = document.getElementById("todoList");
                const todoForm = document.getElementById("todoForm");
                const todoInput = document.querySelector("#todoForm input");
                loadTodos(todoList);

                todoForm.addEventListener("submit", (info) => {
                    info.preventDefault();
                    console.log("est1");
                    addTodos(todoInput,todoList);
                });

                //login
                const nameSpan = document.getElementById("greeting");
                const loginForm = document.getElementById("loginForm");
                getAndPrintUserNameOrShowInput(nameSpan, loginForm);
                loginForm.addEventListener("submit", (e) => {
                    e.preventDefault();
                    const formData = new FormData(e.target);
                    const userName = formData.get("username");

                    login(nameSpan, loginForm, userName);
                });

                //weather
                const weatherDiv = document.getElementById("weather");
                console.log(weatherDiv)
                navigator.geolocation.getCurrentPosition((geo) => {
                    onGeoSuccess(geo, weatherDiv);
                }, onGeoFail);
                
            } );
        </script>
    </head>

    <body>
        <div class="overlay">
            <div class="header">
                <div id="weather" class="weather">
                    <span name="g"></span> <span name="w"></span>
                </div>
                <h1 id="clock"> 00:00:00 </h1>
                <h1 class="handwriting" id="greeting"> Hola! </h1>
                <div class="todoForm-container">
                    <form id="loginForm">
                        <input type="text" class="fancy-input" placeholder="input your name" name="username">
                    </form>
                </div>
                <p> "We are what we think. All that we are arises with our thoughts. With our thoughts, we make the world." </p>
                <div class="todoForm-container">
                    <form id="todoForm">
                        <input type="text" class="fancy-input" placeholder="To do" size="20">
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="column side"></div>
                <div class="column middle">
                    <ul id="todoList">
                    </ul>
                </div>
                <div class="column side"></div>
            </div>
        </dÃŸiv>
        </body>
</html>